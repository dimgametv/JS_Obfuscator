<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>CodeObfuscator</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:white;
}
header{
    text-align:center;
    padding:20px;
    font-size:24px;
    font-weight:bold;
}
.container{
    padding:20px;
}
textarea{
    width:100%;
    height:220px;
    margin-top:10px;
    padding:10px;
    border-radius:8px;
    border:none;
    font-family:monospace;
}
button{
    padding:10px 20px;
    margin-top:10px;
    border:none;
    border-radius:6px;
    font-weight:bold;
    cursor:pointer;
}
select{
    padding:5px;
}
.loading{
    display:none;
    margin-top:10px;
    color:#00ffcc;
}
</style>
</head>

<body>

<header>ðŸš€ CodeObfuscator</header>

<div class="container">

<input type="file" id="fileInput">

<br><br>

<select id="preset">
<option value="light">Light</option>
<option value="medium">Medium</option>
<option value="heavy">Heavy</option>
</select>

<button onclick="startObfuscation()">Obfuscate</button>

<div class="loading" id="loading">Processing...</div>

<textarea id="input" placeholder="Paste HTML / JS code here..."></textarea>
<textarea id="output" placeholder="Obfuscated output..."></textarea>

<button onclick="downloadFile()">Download</button>

</div>

<script>
const worker = new Worker("worker.js");

const input = document.getElementById("input");
const output = document.getElementById("output");
const loading = document.getElementById("loading");

document.getElementById("fileInput").addEventListener("change", function(e){
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = (ev)=> input.value = ev.target.result;
    reader.readAsText(file);
});

function startObfuscation(){
    if(!input.value.trim()){
        alert("Provide code first");
        return;
    }

    loading.style.display="block";

    worker.postMessage({
        code:input.value,
        preset:document.getElementById("preset").value
    });
}

worker.onmessage = function(e){
    loading.style.display="none";
    output.value = e.data;
}

function downloadFile(){
    const blob = new Blob([output.value],{type:"text/plain"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download="obfuscated.txt";
    a.click();
}
</script>

</body>
</html>
